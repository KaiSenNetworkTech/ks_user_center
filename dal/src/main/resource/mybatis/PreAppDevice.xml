<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yunos.tv.appupgrade.dal.dao.PreAppDeviceDAO">

	<!--获取-->	
	<select id="getList" resultType="PreAppDeviceDo" parameterType="PreAppDeviceDo">
		SELECT 
			`id`,`pre_app_id`,`pre_type`,`model_id`,`status`,`gmt_modify`,
			`minimum_os_version` AS minimumOsVersion,`highest_os_version` AS highestOsVersion
		FROM 
			`pre_app_device` 
		WHERE 
			`pre_app_id` = #{preAppId} AND
			`pre_type` = #{preType} AND	
			`model_id` = ${modelId} AND	
			<if test="statusList != null">
				`status` IN 
				<foreach item="item" index="index" collection="statusList" open="(" separator="," close=")">
					#{item}
				</foreach>
				AND 	
			</if>	
			<if test="status != null">	 
				`status` = #{status} AND
			</if>	
			`is_delete` = 0  
		ORDER BY 
			`id` DESC
		LIMIT 100	
	</select>

	<select id="getAllByCondition" resultType="PreAppDeviceDo" parameterType="PreAppDeviceDo">
		SELECT 
			`id`,`pre_app_id`,`pre_type`,`model_id`,`status`,`gmt_modify`,
			`minimum_os_version` AS minimumOsVersion,`highest_os_version` AS highestOsVersion
		FROM 
			`pre_app_device` 
		WHERE 
			<if test="preAppId != null">	
			`pre_app_id` = #{preAppId} AND
			</if>
			<if test="preType != null">	
			`pre_type` = #{preType} AND	
			</if>
			<if test="preAppIds != null">
				`pre_app_id` IN 
				<foreach item="item" index="index" collection="preAppIds" open="(" separator="," close=")">
					#{item}
				</foreach>
				AND 	
			</if>
			`status` IN (1,2,4) AND	
			`is_delete` = 0  
	</select>		
</mapper>