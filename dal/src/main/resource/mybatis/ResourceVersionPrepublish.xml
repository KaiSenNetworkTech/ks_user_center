<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yunos.tv.appupgrade.dal.dao.ResourceVersionPrepublishDAO">

	<!--配置升级预发表总数据量不大-->	
	<select id="getActivePrepublish" resultType="ResourceVersionPrepublishDo" parameterType="long">
		SELECT 
			`id`, `name`, `version_id`, `barrier_count`
		FROM
			`resource_version_prepublish`
		WHERE
			version_id = #{versionId} AND
			is_delete = 0 AND
		  	is_active = 1
		ORDER 
			BY `id` DESC	
		LIMIT 1
	</select>

	<select id="getActivePrepublishByVersionIds" resultType="ResourceVersionPrepublishDo" parameterType="java.util.List">
		SELECT 
			`id`, `name`, `version_id`, `barrier_count`
		FROM
			`resource_version_prepublish`
		WHERE
			<if test="list != null">
				 `version_id` IN 
				<foreach item="item" index="index" collection="list" open="(" separator="," close=")">
					#{item}
				</foreach>	
				AND	
			</if>	
			is_delete = 0 AND
		  	is_active = 1
	</select>
			

		

</mapper>